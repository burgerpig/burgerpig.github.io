贷款本金$S$，贷款期数$T$，期数$T$内的无风险利率$r_f$（年利率）

假设$T=24$，单位月，前12个月还款额为$P$，后12个月还款额为$P-K$，那么
$$
24P-12K=S
$$
假设这种贷款潜在利率为$r$，那么按照等额本金，每个月固定还款额$B$，每个月产生的利息为$M(i)$：
$$
B = S/24=P-K/2
$$

$$
M(i)=Sr\frac{n-(i-1)}{n}
$$

利用无风险利率折算到现值：
$$
S=\sum_{i=1}^{24}(\frac{S}{24}+Sr\frac{25-i}{24})\frac{1}{(1+r_f)^i}
$$
可以化简为
$$
S=\sum_{i=1}^{24}(a_i+rb_i)=\sum_{i=1}^{24}a_i+r\sum_{i=1}^{24}b_i
$$
其中
$$
a_i=\frac{S}{24}\frac{1}{(1+r_f)^i}
$$

$$
b_i=\frac{S(25-i)}{24}\frac{1}{(1+r_f)^i}
$$

对上面两个数列求和，然后可以计算得出$r$
$$
r=\frac{24P-12K-\sum_{i=1}^{24}a_i}{\sum_{i=1}^{24}b_i}
$$




